# Next.js 13+ Server/Client Component Architecture

## ğŸ—ï¸ Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Next.js App Router                       â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Server Components (Default)                        â”‚    â”‚
â”‚  â”‚  âœ… Async/await data fetching                       â”‚    â”‚
â”‚  â”‚  âœ… Direct database access                          â”‚    â”‚
â”‚  â”‚  âœ… Server-side rendering                           â”‚    â”‚
â”‚  â”‚  âœ… Better SEO                                      â”‚    â”‚
â”‚  â”‚  âœ… Smaller bundle size                             â”‚    â”‚
â”‚  â”‚  âŒ No useState, useEffect                          â”‚    â”‚
â”‚  â”‚  âŒ No onClick, onChange                            â”‚    â”‚
â”‚  â”‚  âŒ No browser APIs                                 â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚    â”‚
â”‚  â”‚  â”‚  Client Components ('use client')        â”‚      â”‚    â”‚
â”‚  â”‚  â”‚  âœ… useState, useEffect, useContext      â”‚      â”‚    â”‚
â”‚  â”‚  â”‚  âœ… onClick, onChange, onSubmit          â”‚      â”‚    â”‚
â”‚  â”‚  â”‚  âœ… Browser APIs (window, localStorage)  â”‚      â”‚    â”‚
â”‚  â”‚  â”‚  âœ… Interactive features                 â”‚      â”‚    â”‚
â”‚  â”‚  â”‚  âŒ Cannot use async/await at top level  â”‚      â”‚    â”‚
â”‚  â”‚  â”‚  âŒ Larger bundle size                   â”‚      â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Component Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Browser Request                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Server Component (app/page.tsx)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  export default async function Page() {            â”‚    â”‚
â”‚  â”‚    const data = await fetch('api.com/data')        â”‚    â”‚
â”‚  â”‚    return <ClientComponent data={data} />          â”‚    â”‚
â”‚  â”‚  }                                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ Props (data)
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client Component (components/ClientComponent.tsx)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  'use client'                                       â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚  export function ClientComponent({ data }) {        â”‚    â”‚
â”‚  â”‚    const [state, setState] = useState(data)        â”‚    â”‚
â”‚  â”‚    return <button onClick={...}>Click</button>     â”‚    â”‚
â”‚  â”‚  }                                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Decision Tree

```
Need to use this component?
â”‚
â”œâ”€ Uses useState, useEffect, useContext?
â”‚  â””â”€ YES â†’ 'use client' âœ…
â”‚
â”œâ”€ Has onClick, onChange, onSubmit?
â”‚  â””â”€ YES â†’ 'use client' âœ…
â”‚
â”œâ”€ Uses window, document, localStorage?
â”‚  â””â”€ YES â†’ 'use client' âœ…
â”‚
â”œâ”€ Uses browser-only libraries?
â”‚  â””â”€ YES â†’ 'use client' âœ…
â”‚
â”œâ”€ Only renders static content?
â”‚  â””â”€ YES â†’ Server Component (no 'use client') âœ…
â”‚
â”œâ”€ Fetches data with async/await?
â”‚  â””â”€ YES â†’ Server Component (no 'use client') âœ…
â”‚
â””â”€ Just a layout wrapper?
   â””â”€ YES â†’ Server Component (no 'use client') âœ…
```

## ğŸ“ Real-World Examples

### Example 1: E-commerce Product Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Server Component: app/products/[id]/page.tsx               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  // âœ… Server Component - fetches data              â”‚    â”‚
â”‚  â”‚  export default async function ProductPage() {      â”‚    â”‚
â”‚  â”‚    const product = await db.products.findOne()      â”‚    â”‚
â”‚  â”‚    const reviews = await db.reviews.findMany()      â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚    return (                                          â”‚    â”‚
â”‚  â”‚      <div>                                           â”‚    â”‚
â”‚  â”‚        <h1>{product.name}</h1>                      â”‚    â”‚
â”‚  â”‚        <ProductImages images={product.images} />    â”‚    â”‚
â”‚  â”‚        <AddToCartButton product={product} />        â”‚    â”‚
â”‚  â”‚        <ReviewsList reviews={reviews} />            â”‚    â”‚
â”‚  â”‚      </div>                                          â”‚    â”‚
â”‚  â”‚    )                                                 â”‚    â”‚
â”‚  â”‚  }                                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”œâ”€ Props â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚                          â”‚
                         â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client: ProductImages.tsx       â”‚  â”‚  Client: AddToCartButton.tsx     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  'use client'              â”‚  â”‚  â”‚  â”‚  'use client'              â”‚  â”‚
â”‚  â”‚                            â”‚  â”‚  â”‚  â”‚                            â”‚  â”‚
â”‚  â”‚  export function           â”‚  â”‚  â”‚  â”‚  export function           â”‚  â”‚
â”‚  â”‚  ProductImages() {         â”‚  â”‚  â”‚  â”‚  AddToCartButton() {       â”‚  â”‚
â”‚  â”‚    const [selected,        â”‚  â”‚  â”‚  â”‚    const [loading,         â”‚  â”‚
â”‚  â”‚      setSelected] =        â”‚  â”‚  â”‚  â”‚      setLoading] =         â”‚  â”‚
â”‚  â”‚      useState(0)           â”‚  â”‚  â”‚  â”‚      useState(false)       â”‚  â”‚
â”‚  â”‚                            â”‚  â”‚  â”‚  â”‚                            â”‚  â”‚
â”‚  â”‚    return (                â”‚  â”‚  â”‚  â”‚    const handleClick =     â”‚  â”‚
â”‚  â”‚      <div>                 â”‚  â”‚  â”‚  â”‚      async () => {         â”‚  â”‚
â”‚  â”‚        {images.map(        â”‚  â”‚  â”‚  â”‚        setLoading(true)    â”‚  â”‚
â”‚  â”‚          (img, i) =>       â”‚  â”‚  â”‚  â”‚        await addToCart()   â”‚  â”‚
â”‚  â”‚          <img              â”‚  â”‚  â”‚  â”‚        setLoading(false)   â”‚  â”‚
â”‚  â”‚            onClick={() =>  â”‚  â”‚  â”‚  â”‚      }                     â”‚  â”‚
â”‚  â”‚            setSelected(i)} â”‚  â”‚  â”‚  â”‚                            â”‚  â”‚
â”‚  â”‚          />                â”‚  â”‚  â”‚  â”‚    return (                â”‚  â”‚
â”‚  â”‚        )}                  â”‚  â”‚  â”‚  â”‚      <button               â”‚  â”‚
â”‚  â”‚      </div>                â”‚  â”‚  â”‚  â”‚        onClick=            â”‚  â”‚
â”‚  â”‚    )                       â”‚  â”‚  â”‚  â”‚        {handleClick}       â”‚  â”‚
â”‚  â”‚  }                         â”‚  â”‚  â”‚  â”‚      >                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚        Add to Cart         â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚      </button>             â”‚  â”‚
                                      â”‚  â”‚    )                       â”‚  â”‚
                                      â”‚  â”‚  }                         â”‚  â”‚
                                      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Example 2: Dashboard with Real-time Updates

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Server Component: app/dashboard/page.tsx                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  export default async function Dashboard() {        â”‚    â”‚
â”‚  â”‚    // âœ… Fetch initial data on server               â”‚    â”‚
â”‚  â”‚    const stats = await getStats()                   â”‚    â”‚
â”‚  â”‚    const user = await getCurrentUser()              â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚    return (                                          â”‚    â”‚
â”‚  â”‚      <div>                                           â”‚    â”‚
â”‚  â”‚        <h1>Welcome {user.name}</h1>                 â”‚    â”‚
â”‚  â”‚        <LiveStatsWidget initialStats={stats} />     â”‚    â”‚
â”‚  â”‚      </div>                                          â”‚    â”‚
â”‚  â”‚    )                                                 â”‚    â”‚
â”‚  â”‚  }                                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client Component: LiveStatsWidget.tsx                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  'use client'                                       â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚  export function LiveStatsWidget({ initialStats }) {â”‚    â”‚
â”‚  â”‚    const [stats, setStats] = useState(initialStats)â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚    useEffect(() => {                                â”‚    â”‚
â”‚  â”‚      // âœ… Real-time updates in client              â”‚    â”‚
â”‚  â”‚      const interval = setInterval(async () => {     â”‚    â”‚
â”‚  â”‚        const newStats = await fetch('/api/stats')   â”‚    â”‚
â”‚  â”‚        setStats(newStats)                           â”‚    â”‚
â”‚  â”‚      }, 5000)                                       â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚      return () => clearInterval(interval)           â”‚    â”‚
â”‚  â”‚    }, [])                                           â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚    return <div>{/* Display stats */}</div>          â”‚    â”‚
â”‚  â”‚  }                                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ Visual Component Hierarchy

```
app/
â”œâ”€â”€ layout.tsx (Server Component)
â”‚   â””â”€â”€ Header (Client Component - has menu toggle)
â”‚   â””â”€â”€ children
â”‚   â””â”€â”€ Footer (Server Component - static)
â”‚
â”œâ”€â”€ page.tsx (Server Component)
â”‚   â”œâ”€â”€ Hero (Server Component - static)
â”‚   â”œâ”€â”€ FeaturedProducts (Server Component)
â”‚   â”‚   â””â”€â”€ ProductCard (Client Component - has "Add to Cart")
â”‚   â””â”€â”€ Newsletter (Client Component - has form)
â”‚
â””â”€â”€ products/
    â””â”€â”€ [id]/
        â””â”€â”€ page.tsx (Server Component)
            â”œâ”€â”€ ProductInfo (Server Component - static)
            â”œâ”€â”€ ImageGallery (Client Component - interactive)
            â”œâ”€â”€ AddToCart (Client Component - button)
            â””â”€â”€ Reviews (Server Component)
                â””â”€â”€ ReviewForm (Client Component - form)
```

## ğŸ”„ Data Flow Pattern

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    1. Initial Request                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Server Component Renders                                â”‚
â”‚     - Fetches data from database                            â”‚
â”‚     - Renders HTML on server                                â”‚
â”‚     - Sends HTML + Client Component bundles                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Browser Receives                                        â”‚
â”‚     - Static HTML (fast initial load)                       â”‚
â”‚     - JavaScript for Client Components                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. Client Components Hydrate                               â”‚
â”‚     - Attach event listeners                                â”‚
â”‚     - Initialize state                                      â”‚
â”‚     - Become interactive                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. User Interactions                                       â”‚
â”‚     - Client Components handle clicks, forms, etc.          â”‚
â”‚     - Can fetch more data via API routes                    â”‚
â”‚     - Update UI without full page reload                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’¡ Best Practices

### âœ… DO:
- Keep Server Components at the page level
- Use Client Components for interactive parts
- Pass data from Server to Client via props
- Use Server Components for SEO-critical content
- Use Client Components for forms and buttons

### âŒ DON'T:
- Don't make everything a Client Component
- Don't fetch data in Client Components if you can do it on server
- Don't pass functions as props from Server to Client
- Don't use browser APIs in Server Components
- Don't use async/await at component level in Client Components

## ğŸ¯ Performance Impact

```
Server Component:
â”œâ”€â”€ Bundle Size: 0 KB (not sent to client)
â”œâ”€â”€ Initial Load: Fast (pre-rendered HTML)
â”œâ”€â”€ SEO: Excellent (fully rendered)
â””â”€â”€ Interactivity: None

Client Component:
â”œâ”€â”€ Bundle Size: ~50-200 KB (depends on dependencies)
â”œâ”€â”€ Initial Load: Slower (needs hydration)
â”œâ”€â”€ SEO: Good (if server-rendered first)
â””â”€â”€ Interactivity: Full

Optimal Mix:
â”œâ”€â”€ Bundle Size: Minimal (only interactive parts)
â”œâ”€â”€ Initial Load: Fast (server-rendered)
â”œâ”€â”€ SEO: Excellent (server content)
â””â”€â”€ Interactivity: Where needed
```

---

**Key Takeaway:** Use Server Components by default, add 'use client' only when you need interactivity. This gives you the best of both worlds! ğŸš€
